"use strict";(self.webpackChunkmatch_it_web=self.webpackChunkmatch_it_web||[]).push([[148],{8148:(we,Z,l)=>{l.r(Z),l.d(Z,{GameSourceModule:()=>Ie});var h=l(6814),c=l(6223),S=l(8109),k=l(8562),u=l(5861),G=l(9825),e=l(5879),d=l(708),g=l(3467),v=l(9862);let x=(()=>{class i{constructor(t){this.http=t}getGameSourceList(t){return(0,d.n)(this.http.get(g.Fu.GAME_SOURCE(),{params:t}))}createGameSource(t){return(0,d.n)(this.http.post(g.Fu.GAME_SOURCE(),t))}updateGameSource(t){return(0,d.n)(this.http.put(g.Fu.GAME_SOURCE(),t))}deleteGameSourceById(t){return(0,d.n)(this.http.delete(g.Fu.GAME_SOURCE()+"/"+t))}getGameSourceDetailsById(t){return(0,d.n)(this.http.get(g.Fu.GAME_SOURCE()+"/"+t))}uploadSourceMedia(t,o){return(0,d.n)(this.http.post(g.Fu.MEDIA_UPLOAD()+"/"+o,t,{headers:{fileUpload:"true"}}))}deleteMediaById(t){return(0,d.n)(this.http.delete(g.Fu.MEDIA_DELETE()+"/"+t))}updateMediaBucket(t){return(0,d.n)(this.http.patch(g.Fu.MEDIA_UPDATE_BUCKET(),t))}updateSourceGroup(t,o){return(0,d.n)(this.http.patch(g.Fu.UPDATE_GAME_SOURCE_GROUP(),{id:t,sourceGroup:o}))}applyNewSequence(t,o,a){return(0,d.n)(this.http.patch(g.Fu.GAME_SOURCE_APPLY_NEW_SEQUENCE(),{gameTypeId:t,sourceGroup:o,clearSequence:a}))}static#e=this.\u0275fac=function(o){return new(o||i)(e.LFG(v.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var L=l(4726),y=l(8282),I=l(3642),A=l(617),_=l(2296),f=l(9157),w=l(2032),N=l(8525),U=l(3680),D=l(2599),E=l(7398),Q=l(6593);let T=(()=>{class i{constructor(t,o){this.http=t,this.sanitizer=o}transform(t){return this.http.get(t,{responseType:"blob"}).pipe((0,E.U)(o=>this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(o))))}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(v.eN,16),e.Y36(Q.H7,16))};static#t=this.\u0275pipe=e.Yjl({name:"secure",type:i,pure:!0,standalone:!0})}return i})();function M(i,r){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.gameType)}}function O(i,r){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function b(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1,"tts is required"),e.qZA())}function R(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1,"White space not allowed"),e.qZA())}function B(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,b,2,0,"div",9),e.YNc(2,R,2,0,"div",9),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.tts.errors?null:t.f.tts.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.f.tts.errors?null:t.f.tts.errors.whiteSpace)}}function z(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1,"spelling is required"),e.qZA())}function V(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1,"White space not allowed"),e.qZA())}function $(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,z,2,0,"div",9),e.YNc(2,V,2,0,"div",9),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.spelling.errors?null:t.f.spelling.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.f.spelling.errors?null:t.f.spelling.errors.whiteSpace)}}function H(i,r){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function P(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",23),e._UZ(1,"img",24),e.ALo(2,"async"),e.ALo(3,"secure"),e.TgZ(4,"div")(5,"mat-form-field")(6,"mat-label"),e._uU(7,"Bucket"),e.qZA(),e.TgZ(8,"mat-select",25),e.NdJ("selectionChange",function(a){const s=e.CHM(t).$implicit,m=e.oxw(2);return e.KtG(m.onBucketTypeChange(a.value,s))}),e.YNc(9,H,2,2,"mat-option",6),e.qZA()(),e.TgZ(10,"button",26),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.deleteGameSourceMedia(n))}),e.TgZ(11,"mat-icon"),e._uU(12,"delete"),e.qZA()()()()}if(2&i){const t=r.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("src",e.lcZ(2,3,e.lcZ(3,5,o.utilService.getImageUrl(t.id))),e.LSH),e.xp6(7),e.Q6J("value",t.bucket),e.xp6(1),e.Q6J("ngForOf",null==o.systemConstValues?null:o.systemConstValues.bucketType)}}function K(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",17)(2,"div",1)(3,"h4"),e._uU(4,"Media Details"),e.qZA()()(),e.TgZ(5,"div",3),e.YNc(6,P,13,7,"div",18),e.qZA(),e._UZ(7,"input",19),e.TgZ(8,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(11);return e.KtG(a.click())}),e._uU(9,"Add Game Source Media"),e.qZA(),e.TgZ(10,"input",21,22),e.NdJ("change",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.addSourceMedia(a))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",null==t.data?null:t.data.mediaItems)}}let F=(()=>{class i{constructor(t,o,a,n,s,m){this.gameSourceService=t,this.gameTypeService=o,this.activatedRoute=a,this.utilService=n,this.systemService=s,this.formBuilder=m,this.showValidation=!1,this.data=null,this.gameSourceId=null,this.gameTypeList=[]}ngOnInit(){var t=this;this.initForm(),this.activatedRoute.paramMap.subscribe(function(){var o=(0,u.Z)(function*(a){a.get("id")&&(t.gameSourceId=parseInt(a.get("id")??"0")),yield t.preLoadData()});return function(a){return o.apply(this,arguments)}}())}initForm(){this.form=this.formBuilder.group({gameTypeId:new c.NI(null,[c.kI.required]),sourceGroup:new c.NI(null,[c.kI.required]),tts:new c.NI(null,[c.kI.required,G._.containSpace]),spelling:new c.NI(null,[c.kI.required,G._.containSpace]),text1:new c.NI(null),text2:new c.NI(null),status:new c.NI("Active",[c.kI.required])})}onChangeStatus(t){this.form.patchValue({status:t?"Active":"Inactive"})}get f(){return this.form.controls}preLoadData(){var t=this;return(0,u.Z)(function*(){try{t.utilService.showLoader();let o=yield t.gameTypeService.getGameTypeDropdownList();t.gameTypeList=o.payload.data,o=yield t.systemService.getSystemConstValues(),t.systemConstValues=o,t.gameSourceId&&(o=yield t.gameSourceService.getGameSourceDetailsById(t.gameSourceId),t.data=o.payload,t.data?.id&&t.form.addControl("id",new c.NI(t.data?.id,[c.kI.required])),t.form.patchValue(t.data))}catch(o){t.utilService.showError(o)}finally{t.utilService.hideLoader()}})()}deleteGameSourceMedia(t){var o=this;return(0,u.Z)(function*(){try{o.utilService.showLoader(),yield o.gameSourceService.deleteMediaById(t.id),o.utilService.showSuccessSnack("Media item deleted successfully"),yield o.preLoadData()}catch(a){o.utilService.showError(a)}finally{o.utilService.hideLoader()}})()}addSourceMedia(t){var o=this;return(0,u.Z)(function*(){try{o.utilService.showLoader();const a=t.target?.files;if(a.length){for(let n=0;n<a.length;n++){const s=a[n];let m=new FormData;m.append("file",s);let C=yield o.gameSourceService.uploadSourceMedia(m,o.gameSourceId);console.log(C)}t.target.value=null,yield o.preLoadData()}}catch(a){o.utilService.showError(a)}finally{o.utilService.hideLoader()}})()}onSubmit(){var t=this;return(0,u.Z)(function*(){if(t.form.invalid)t.showValidation=!0;else{t.showValidation=!1;try{let o;t.utilService.showLoader(),t.gameSourceId?o=yield t.gameSourceService.updateGameSource(t.form.value):(o=yield t.gameSourceService.createGameSource(t.form.value),t.gameSourceId=o.payload.id),t.utilService.showSuccessSnack(o.message),yield t.preLoadData()}catch(o){t.utilService.showError(o)}finally{t.utilService.hideLoader()}}})()}onBucketTypeChange(t,o){var a=this;return(0,u.Z)(function*(){try{a.utilService.showLoader();let n=yield a.gameSourceService.updateMediaBucket({id:o.id,bucket:t});a.utilService.showSuccessSnack(n.message)}catch(n){a.utilService.showError(n)}finally{a.utilService.hideLoader()}})()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(x),e.Y36(L.u),e.Y36(S.gz),e.Y36(y.f),e.Y36(I.o),e.Y36(c.qu))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-game-source-details"]],decls:38,vars:8,consts:[[1,"heading"],[1,"d-flex"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-4"],["formControlName","gameTypeId","placeholder","Select game type"],[3,"value",4,"ngFor","ngForOf"],["formControlName","sourceGroup","placeholder","Select level filter"],["matInput","","formControlName","tts","placeholder","Enter tts"],[4,"ngIf"],["matInput","","formControlName","text1","placeholder","Enter text1"],["matInput","","formControlName","text2","placeholder","Enter text2"],["matInput","","formControlName","spelling","rows","2","placeholder","Enter spelling"],[1,"col-lg-2"],[1,"mt-2",3,"checked","change"],["type","submit","color","primary","mat-raised-button","",1,"mt-4"],[3,"value"],[1,"heading","mt-4"],["class","col-lg-3",4,"ngFor","ngForOf"],["matInput","","placeholder","Browse File","fieldLabel","Add Game Source Media","hidden",""],["type","button","mat-raised-button","","color","primary",1,"mt-3",3,"click"],["autocomplete","off","type","file","accept","image/png, image/jpeg, image/jpg, image/svg+xml","multiple","",1,"file-btn",2,"display","none",3,"change"],["fileUpload",""],[1,"col-lg-3"],["height","100",1,"m-3",3,"src"],["placeholder","Bucket",3,"value","selectionChange"],["mat-icon-button","",3,"click"]],template:function(o,a){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3,"Game Source Details"),e.qZA()()(),e.TgZ(4,"form",2),e.NdJ("ngSubmit",function(){return a.onSubmit()}),e.TgZ(5,"div",3)(6,"mat-form-field",4)(7,"mat-select",5),e.YNc(8,M,2,2,"mat-option",6),e.qZA()(),e.TgZ(9,"mat-form-field",4)(10,"mat-select",7),e.YNc(11,O,2,2,"mat-option",6),e.qZA()(),e.TgZ(12,"mat-form-field",4)(13,"mat-label"),e._uU(14,"tts"),e.qZA(),e._UZ(15,"input",8),e.YNc(16,B,3,2,"mat-error",9),e.qZA(),e.TgZ(17,"mat-form-field",4)(18,"mat-label"),e._uU(19,"text1"),e.qZA(),e._UZ(20,"input",10),e.qZA(),e.TgZ(21,"mat-form-field",4)(22,"mat-label"),e._uU(23,"text2"),e.qZA(),e._UZ(24,"input",11),e.qZA(),e.TgZ(25,"mat-form-field",4)(26,"mat-label"),e._uU(27,"spelling"),e.qZA(),e._UZ(28,"textarea",12),e.YNc(29,$,3,2,"mat-error",9),e.qZA(),e.TgZ(30,"div",13)(31,"mat-label"),e._uU(32,"Status"),e.qZA(),e._UZ(33,"br"),e.TgZ(34,"mat-slide-toggle",14),e.NdJ("change",function(s){return a.onChangeStatus(s.checked)}),e.qZA()()(),e.TgZ(35,"button",15),e._uU(36),e.qZA()(),e.YNc(37,K,12,1,"div",9)),2&o&&(e.xp6(4),e.Q6J("formGroup",a.form),e.xp6(4),e.Q6J("ngForOf",a.gameTypeList),e.xp6(3),e.Q6J("ngForOf",null==a.systemConstValues?null:a.systemConstValues.sourceGroup),e.xp6(5),e.Q6J("ngIf",a.f.tts.invalid&&(a.f.tts.dirty||a.f.tts.touched||a.showValidation)),e.xp6(13),e.Q6J("ngIf",a.f.spelling.invalid&&(a.f.spelling.dirty||a.f.spelling.touched||a.showValidation)),e.xp6(5),e.Q6J("checked","Active"==a.f.status.value),e.xp6(2),e.hij("",null!=a.data&&a.data.id?"Update":"Add "," Game Source"),e.xp6(1),e.Q6J("ngIf",a.gameSourceId))},dependencies:[h.sg,h.O5,A.Hw,_.lW,_.RK,f.KE,f.hX,f.TO,w.Nt,N.gD,U.ey,D.Rr,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,h.Ov,T]})}return i})();var q=l(1476),p=l(5313),j=l(8645),W=l(9773),X=l(3620),ee=l(3997),J=l(7700);function te(i,r){if(1&i&&(e._UZ(0,"img",1),e.ALo(1,"async"),e.ALo(2,"secure")),2&i){const t=e.oxw();e.Q6J("src",e.lcZ(1,1,e.lcZ(2,3,t.utilService.getImageUrl(t.data.media.id))),e.LSH)}}let oe=(()=>{class i{constructor(t,o){this.utilService=t,this.data=o}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(y.f),e.Y36(J.WI))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-show-image-dialog"]],decls:1,vars:1,consts:[["width","400","height","400",3,"src",4,"ngIf"],["width","400","height","400",3,"src"]],template:function(o,a){1&o&&e.YNc(0,te,3,5,"img",0),2&o&&e.Q6J("ngIf",null==a.data||null==a.data.media?null:a.data.media.id)},dependencies:[h.O5,h.Ov,T]})}return i})();var Y=l(7988),ie=l(2596);function ae(i,r){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.gameType)}}function re(i,r){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ne(i,r){1&i&&e._UZ(0,"tr",33)}function le(i,r){1&i&&e._UZ(0,"tr",34)}function ce(i,r){1&i&&(e.TgZ(0,"th",35),e._uU(1,"Media"),e.qZA())}function se(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"img",38),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.showImageDialog(n))}),e.ALo(2,"async"),e.ALo(3,"secure"),e.qZA()()}if(2&i){const t=r.$implicit,o=e.oxw(2);e.xp6(1),e.s9C("matTooltip","Bucket: "+t.bucket),e.Q6J("matTooltipPosition","right"),e.uIk("src",e.lcZ(2,3,e.lcZ(3,5,o.utilService.getImageUrl(t.id))),e.LSH)}}function ue(i,r){if(1&i&&(e.TgZ(0,"td",36),e.YNc(1,se,4,7,"div",37),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.mediaItems)}}function me(i,r){1&i&&(e.TgZ(0,"th",35),e._uU(1,"Spelling"),e.qZA())}function pe(i,r){if(1&i&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t.spelling," ")}}function de(i,r){1&i&&(e.TgZ(0,"th",35),e._uU(1,"Text1"),e.qZA())}function ge(i,r){if(1&i&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t.text1," ")}}function he(i,r){1&i&&(e.TgZ(0,"th",35),e._uU(1,"Text2"),e.qZA())}function fe(i,r){if(1&i&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t.text2," ")}}function Se(i,r){1&i&&(e.TgZ(0,"th",35),e._uU(1,"Sequence"),e.qZA())}function _e(i,r){if(1&i&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t.sequence," ")}}function ve(i,r){1&i&&(e.TgZ(0,"th",35),e._uU(1,"Source Group"),e.qZA())}function ye(i,r){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Te(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td",36)(1,"mat-form-field",39)(2,"mat-select",40),e.NdJ("selectionChange",function(a){const s=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.onSourceGroupChange(s.id,a.value))}),e.YNc(3,ye,2,2,"mat-option",9),e.qZA()()()}if(2&i){const t=r.$implicit,o=e.oxw();e.xp6(2),e.Q6J("value",t.sourceGroup),e.xp6(1),e.Q6J("ngForOf",null==o.systemConstValues?null:o.systemConstValues.sourceGroup)}}function Ce(i,r){1&i&&(e.TgZ(0,"th",35),e._uU(1,"Status"),e.qZA())}function Ze(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td",41),e.NdJ("click",function(a){return a.stopPropagation()}),e.TgZ(1,"mat-slide-toggle",42),e.NdJ("change",function(){const n=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onChangeStatus(n))}),e.qZA()()}if(2&i){const t=r.$implicit;e.xp6(1),e.Q6J("checked","Active"==t.status)}}function Ge(i,r){1&i&&e._UZ(0,"th",35)}function xe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td",36)(1,"button",43),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.deleteSourceDetails(n))}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()(),e.TgZ(4,"button",43),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.openDetails(n))}),e.TgZ(5,"mat-icon"),e._uU(6,"edit"),e.qZA()()()}}const Le=[{path:"",component:(()=>{class i{constructor(t,o,a,n,s,m,C,Ae){this.utilService=t,this.gameSourceService=o,this.gameTypeService=a,this.fb=n,this.router=s,this.activatedRoute=m,this.systemService=C,this._dialog=Ae,this.displayedColumns=["media","spelling","text1","text2","sequence","sourceGroup","status","action"],this.dataSource=new p.by,this.onDestroy=new j.x,this.pagination={pageSizeOptions:[10,25,50,100],pageSize:10,pageIndex:0},this.gameTypeList=[]}ngOnDestroy(){this.onDestroy.next(),this.onDestroy.complete()}ngOnInit(){this.filterForm=this.fb.group({keyword:new c.NI(null),gameTypeId:new c.NI(null),sourceGroup:new c.NI(null)}),this.activatedRoute.queryParams.subscribe(t=>{const o={};t?.page&&!this.pagination.pageIndex&&(this.pagination.pageIndex=parseInt(t?.page)),t?.size&&(this.pagination.pageSize=t?.size),t?.keyword&&!this.filterForm.value.keyword&&(o.keyword=t?.keyword),t?.gameTypeId&&!this.filterForm.value.gameTypeId&&(o.gameTypeId=parseInt(t?.gameTypeId)),t?.sourceGroup&&!this.filterForm.value.sourceGroup&&(o.sourceGroup=t?.sourceGroup),this.filterForm.patchValue(o)}),this.filterForm.controls.keyword.valueChanges.pipe((0,W.R)(this.onDestroy),(0,X.b)(500),(0,ee.x)()).subscribe(t=>{this.paginator.pageIndex=0,this.getGameSourceList()}),this.loadData()}addGameSource(){this.router.navigate(["add-source-form"],{relativeTo:this.activatedRoute})}onGameTypeChanged(){var t=this;return(0,u.Z)(function*(){yield t.getGameSourceList()})()}onGameSourceGroupChanged(){var t=this;return(0,u.Z)(function*(){yield t.getGameSourceList()})()}applyNewSequence(t){var o=this;return(0,u.Z)(function*(){if(o.filterForm.value.gameTypeId)if(o.filterForm.value.sourceGroup)try{o.utilService.showLoader();let a=yield o.gameSourceService.applyNewSequence(o.filterForm.value.gameTypeId,o.filterForm.value.sourceGroup,t);o.utilService.showSuccessSnack(a.message),yield o.getGameSourceList(!1)}catch(a){o.utilService.showError(a)}finally{o.utilService.hideLoader()}else o.utilService.showErrorSnack("Please select source group!");else o.utilService.showErrorSnack("Please select game!")})()}loadData(){var t=this;return(0,u.Z)(function*(){try{t.utilService.showLoader();let o=yield t.systemService.getSystemConstValues();t.systemConstValues=o;let a=yield t.gameTypeService.getGameTypeDropdownList();t.gameTypeList=a.payload.data,yield t.getGameSourceList(!1)}catch(o){t.utilService.showError(o)}finally{t.utilService.hideLoader()}})()}getGameSourceList(t=!0){var o=this;return(0,u.Z)(function*(){try{t&&o.utilService.showLoader();let a=yield o.gameSourceService.getGameSourceList(o.filterParams());a.payload.data.map(n=>{n.mediaItems?.sort((s,m)=>s.id-m.id)}),o.dataSource.data=a.payload.data,setTimeout(()=>{o.paginator.pageIndex=o.pagination.pageIndex,o.paginator.length=a.payload.totalItems})}catch(a){o.utilService.showError(a)}finally{t&&o.utilService.hideLoader()}})()}pageChanged(t){this.pagination.pageSize=t.pageSize,this.pagination.pageIndex=t.pageIndex,this.getGameSourceList()}filterParams(){let t=new v.LE;return t=t.append("skip",this.pagination.pageIndex*this.pagination.pageSize),t=t.append("limit",this.pagination.pageSize),this.filterForm.value.keyword&&(t=t.append("keyword",this.filterForm.value.keyword)),this.filterForm.value.gameTypeId&&(t=t.append("gameTypeId",this.filterForm.value.gameTypeId)),this.filterForm.value.sourceGroup&&(t=t.append("sourceGroup",this.filterForm.value.sourceGroup)),this.updateRoute(),t}updateRoute(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.activatedRoute,queryParams:{page:this.pagination.pageIndex,size:this.pagination.pageSize,keyword:this.filterForm.value.keyword,gameTypeId:this.filterForm.value.gameTypeId,sourceGroup:this.filterForm.value.sourceGroup},queryParamsHandling:"merge"})}openDetails(t){this.router.navigate(["source-form",t.id],{relativeTo:this.activatedRoute})}onSourceGroupChange(t,o){var a=this;return(0,u.Z)(function*(){try{a.utilService.showLoader();let n=yield a.gameSourceService.updateSourceGroup(t,o);a.utilService.showSuccessSnack(n.message)}catch(n){a.utilService.showError(n)}finally{a.utilService.hideLoader()}})()}onChangeStatus(t){var o=this;return(0,u.Z)(function*(){try{o.utilService.showLoader(),t.status="Active"==t.status?"Inactive":"Active";let a=yield o.gameSourceService.updateGameSource(t);o.utilService.showSuccessSnack(a.message),yield o.getGameSourceList(!1)}catch(a){o.utilService.showError(a)}finally{o.utilService.hideLoader()}})()}deleteSourceDetails(t){var o=this;return(0,u.Z)(function*(){if(!0===confirm("Are you sure? Do you want to delete source item?"))try{o.utilService.showLoader(),yield o.gameSourceService.deleteGameSourceById(t.id),o.utilService.showSuccessSnack("Game source item deleted successfully"),yield o.getGameSourceList(!1)}catch(a){o.utilService.showError(a)}finally{o.utilService.hideLoader()}})()}showImageDialog(t){this._dialog.open(oe,{autoFocus:!1,data:{media:t}})}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(y.f),e.Y36(x),e.Y36(L.u),e.Y36(c.qu),e.Y36(S.F0),e.Y36(S.gz),e.Y36(I.o),e.Y36(J.uw))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-game-source-list"]],viewQuery:function(o,a){if(1&o&&e.Gf(q.NW,5),2&o){let n;e.iGM(n=e.CRH())&&(a.paginator=n.first)}},decls:60,vars:10,consts:[[1,"heading"],[1,"d-flex"],["mat-button","",3,"click"],[3,"formGroup"],[1,"row"],[1,"col-lg-3"],["matPrefix",""],["matInput","","placeholder","Search game source...","formControlName","keyword"],["formControlName","gameTypeId","placeholder","Select game type",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-2"],["formControlName","sourceGroup","placeholder","Select level filter",3,"selectionChange"],[1,"col-lg-4","mt-2"],["mat-icon-button","","matTooltip","Menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-button","","color","primary",1,"m-2",3,"click"],["mat-table","",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matColumnDef","media"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","spelling"],["matColumnDef","text1"],["matColumnDef","text2"],["matColumnDef","sequence"],["matColumnDef","sourceGroup"],["matColumnDef","status"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","action"],["showFirstLastButtons","",1,"mt-3",3,"pageSize","pageIndex","pageSizeOptions","page"],["paginator",""],[3,"value"],["mat-header-row",""],["mat-row",""],["mat-header-cell",""],["mat-cell",""],[4,"ngFor","ngForOf"],["height","60",1,"m-2",3,"matTooltipPosition","matTooltip","click"],[1,"mt-3"],["placeholder","Source Group",3,"value","selectionChange"],["mat-cell","",3,"click"],[3,"checked","change"],["mat-icon-button","",3,"click"]],template:function(o,a){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3,"Game Source"),e.qZA()(),e.TgZ(4,"button",2),e.NdJ("click",function(){return a.addGameSource()}),e.TgZ(5,"mat-icon"),e._uU(6,"add"),e.qZA(),e._uU(7," Add Game Source"),e.qZA()(),e.TgZ(8,"form",3)(9,"div",4)(10,"mat-form-field",5)(11,"mat-icon",6),e._uU(12,"search"),e.qZA(),e._UZ(13,"input",7),e.qZA(),e.TgZ(14,"mat-form-field",5)(15,"mat-select",8),e.NdJ("selectionChange",function(){return a.onGameTypeChanged()}),e.YNc(16,ae,2,2,"mat-option",9),e.qZA()(),e.TgZ(17,"mat-form-field",10)(18,"mat-select",11),e.NdJ("selectionChange",function(){return a.onGameSourceGroupChanged()}),e.YNc(19,re,2,2,"mat-option",9),e.qZA()(),e.TgZ(20,"div",12)(21,"button",13)(22,"mat-icon"),e._uU(23,"tune"),e.qZA()(),e.TgZ(24,"mat-menu",null,14)(26,"button",15),e.NdJ("click",function(){return a.applyNewSequence(!1)}),e._uU(27,"Apply New Sequence"),e.qZA(),e._uU(28,"\xa0 "),e.TgZ(29,"button",15),e.NdJ("click",function(){return a.applyNewSequence(!0)}),e._uU(30,"Clear Sequence"),e.qZA()()()()(),e.TgZ(31,"table",16),e.YNc(32,ne,1,0,"tr",17),e.YNc(33,le,1,0,"tr",18),e.ynx(34,19),e.YNc(35,ce,2,0,"th",20),e.YNc(36,ue,2,1,"td",21),e.BQk(),e.ynx(37,22),e.YNc(38,me,2,0,"th",20),e.YNc(39,pe,2,1,"td",21),e.BQk(),e.ynx(40,23),e.YNc(41,de,2,0,"th",20),e.YNc(42,ge,2,1,"td",21),e.BQk(),e.ynx(43,24),e.YNc(44,he,2,0,"th",20),e.YNc(45,fe,2,1,"td",21),e.BQk(),e.ynx(46,25),e.YNc(47,Se,2,0,"th",20),e.YNc(48,_e,2,1,"td",21),e.BQk(),e.ynx(49,26),e.YNc(50,ve,2,0,"th",20),e.YNc(51,Te,4,2,"td",21),e.BQk(),e.ynx(52,27),e.YNc(53,Ce,2,0,"th",20),e.YNc(54,Ze,2,1,"td",28),e.BQk(),e.ynx(55,29),e.YNc(56,Ge,1,0,"th",20),e.YNc(57,xe,7,0,"td",21),e.BQk(),e.qZA(),e.TgZ(58,"mat-paginator",30,31),e.NdJ("page",function(s){return a.pageChanged(s)}),e.qZA()),2&o){const n=e.MAs(25);e.xp6(8),e.Q6J("formGroup",a.filterForm),e.xp6(8),e.Q6J("ngForOf",a.gameTypeList),e.xp6(3),e.Q6J("ngForOf",null==a.systemConstValues?null:a.systemConstValues.sourceGroup),e.xp6(2),e.Q6J("matMenuTriggerFor",n),e.xp6(10),e.Q6J("dataSource",a.dataSource),e.xp6(1),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(25),e.Q6J("pageSize",a.pagination.pageSize)("pageIndex",a.pagination.pageIndex)("pageSizeOptions",a.pagination.pageSizeOptions)}},dependencies:[h.sg,A.Hw,_.lW,_.RK,q.NW,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,Y.VK,Y.p6,f.KE,f.qo,w.Nt,ie.gM,N.gD,U.ey,D.Rr,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,h.Ov,T]})}return i})()},{path:"source-form/:id",component:F},{path:"add-source-form",component:F}];let Ie=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[h.ez,k.q,c.UX,S.Bz.forChild(Le)]})}return i})()}}]);
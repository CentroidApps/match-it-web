"use strict";(self.webpackChunkmatch_it_web=self.webpackChunkmatch_it_web||[]).push([[277],{3277:(Ze,h,r)=>{r.r(h),r.d(h,{GameLevelModule:()=>Le});var u=r(6814),l=r(6223),q=r(8109),I=r(8562),c=r(5861),N=r(9862),_=r(1476),d=r(5313),w=r(8645),U=r(9773),Y=r(3620),J=r(3997),p=r(7700),L=r(9825),e=r(5879),T=r(4726),Z=r(5155),y=r(3642),C=r(8282),A=r(617),g=r(2296),f=r(9157),b=r(2032),S=r(8525),G=r(3680),x=r(2599);function Q(a,n){if(1&a&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.gameType)}}function D(a,n){1&a&&(e.TgZ(0,"span"),e._uU(1,"Game type is required"),e.qZA())}function V(a,n){if(1&a&&(e.TgZ(0,"mat-error"),e.YNc(1,D,2,0,"span",8),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.gameTypeId.errors?null:t.f.gameTypeId.errors.required)}}function k(a,n){if(1&a&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function F(a,n){1&a&&(e.TgZ(0,"span"),e._uU(1,"Game level is required"),e.qZA())}function O(a,n){1&a&&(e.TgZ(0,"span"),e._uU(1,"White space not allowed"),e.qZA())}function B(a,n){if(1&a&&(e.TgZ(0,"mat-error"),e.YNc(1,F,2,0,"span",8),e.YNc(2,O,2,0,"span",8),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.gameLevel.errors?null:t.f.gameLevel.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.f.gameLevel.errors?null:t.f.gameLevel.errors.whiteSpace)}}function E(a,n){1&a&&(e.TgZ(0,"span"),e._uU(1,"Description is required"),e.qZA())}function z(a,n){if(1&a&&(e.TgZ(0,"mat-error"),e.YNc(1,E,2,0,"span",8),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.description.errors?null:t.f.description.errors.required)}}function R(a,n){if(1&a&&(e.TgZ(0,"mat-option",20)(1,"div",21),e._UZ(2,"div"),e._uU(3),e.qZA()()),2&a){const t=n.$implicit,i=e.oxw();e.Q6J("value",t.value),e.xp6(2),e.Akn("height:20px; width:20px; background-color:"+i.utilService.toColor(t.value)),e.xp6(1),e.hij(" \xa0 ",t.key," ")}}function j(a,n){1&a&&(e.TgZ(0,"span"),e._uU(1,"Background Color is required"),e.qZA())}function $(a,n){if(1&a&&(e.TgZ(0,"mat-error"),e.YNc(1,j,2,0,"span",8),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.bgColor.errors?null:t.f.bgColor.errors.required)}}function M(a,n){1&a&&(e.TgZ(0,"span"),e._uU(1,"Coin value is required"),e.qZA())}function H(a,n){1&a&&(e.TgZ(0,"span"),e._uU(1,"White space not allowed"),e.qZA())}function K(a,n){if(1&a&&(e.TgZ(0,"mat-error"),e.YNc(1,M,2,0,"span",8),e.YNc(2,H,2,0,"span",8),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.coinValue.errors?null:t.f.coinValue.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.f.coinValue.errors?null:t.f.coinValue.errors.whiteSpace)}}function W(a,n){1&a&&(e.TgZ(0,"span"),e._uU(1,"Status is required"),e.qZA())}function X(a,n){if(1&a&&(e.TgZ(0,"mat-error"),e.YNc(1,W,2,0,"span",8),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.status.errors?null:t.f.status.errors.required)}}let P=(()=>{class a{constructor(t,i,o,s,m,v,Te){this.formBuilder=t,this.gameTypeService=i,this.gameLevelService=o,this.systemService=s,this.utilService=m,this.dialogRef=v,this.data=Te,this.showValidation=!1,this.gameTypeList=[]}ngOnInit(){this.initForm(),this.loadData()}initForm(){this.form=this.formBuilder.group({gameTypeId:new l.NI(this.data?.gameType?.id,[l.kI.required]),gameLevel:new l.NI(this.data?.gameLevel??"",[l.kI.required,L._.containSpace]),description:new l.NI(this.data?.description??"",[l.kI.required]),bgColor:new l.NI(this.data?.bgColor??"",[l.kI.required]),coinValue:new l.NI(this.data?.coinValue??"",[l.kI.required,L._.containSpace]),sequence:new l.NI(this.data?.sequence),status:new l.NI(this.data?.status??"",[l.kI.required]),isMixed:new l.NI(this.data?.isMixed??!1)}),this.data?.id&&this.form.addControl("id",new l.NI(this.data?.id,[l.kI.required]))}loadData(){var t=this;return(0,c.Z)(function*(){try{t.utilService.showLoader();let i=yield t.gameTypeService.getGameTypeDropdownList();t.gameTypeList=i.payload.data,i=yield t.systemService.getSystemConstValues(),t.systemConstValues=i}catch(i){t.utilService.showError(i)}finally{t.utilService.hideLoader()}})()}get f(){return this.form.controls}onSubmit(){var t=this;return(0,c.Z)(function*(){if(t.form.invalid)t.showValidation=!0;else{t.showValidation=!1;try{t.utilService.showLoader();let i,o=t.form.value;o.sequence=o.sequence.toString().length<=0?null:Number(o.sequence),i=t.data?.id?yield t.gameLevelService.updateGameLevel(o):yield t.gameLevelService.addGameLevel(o),t.utilService.showSuccessSnack(i.message),t.dialogRef.close(!0)}catch(i){t.utilService.showError(i)}finally{t.utilService.hideLoader()}}})()}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(l.qu),e.Y36(T.u),e.Y36(Z.A),e.Y36(y.o),e.Y36(C.f),e.Y36(p.so),e.Y36(p.WI))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-game-level"]],decls:58,vars:12,consts:[[1,"p-3"],[1,"dialog-heading"],["mat-icon-button","","mat-dialog-close",""],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-6","mt-3"],["formControlName","gameTypeId","placeholder","Select game type"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["placeholder","Select game level","formControlName","gameLevel"],["matInput","","formControlName","description","placeholder","Enter Description"],["placeholder","Enter Background Color","formControlName","bgColor"],["matInput","","formControlName","coinValue","placeholder","Enter coin value"],["matInput","","formControlName","sequence","placeholder","Enter Sequence"],["placeholder","Status","formControlName","status"],["value","Active"],["value","Inactive"],["formControlName","isMixed",1,"mt-2"],[1,"mt-2","mb-2","d-flex","justify-content-end","w-100"],["mat-raised-button","","color","primary"],[3,"value"],[1,"d-flex"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3),e.qZA(),e.TgZ(4,"button",2)(5,"mat-icon"),e._uU(6,"close"),e.qZA()()(),e.TgZ(7,"form",3),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(8,"div",4)(9,"mat-form-field",5)(10,"mat-label"),e._uU(11,"Game Type"),e.qZA(),e.TgZ(12,"mat-select",6),e.YNc(13,Q,2,2,"mat-option",7),e.qZA(),e.YNc(14,V,2,1,"mat-error",8),e.qZA(),e.TgZ(15,"mat-form-field",5)(16,"mat-label"),e._uU(17,"Game Level"),e.qZA(),e.TgZ(18,"mat-select",9),e.YNc(19,k,2,2,"mat-option",7),e.qZA(),e.YNc(20,B,3,2,"mat-error",8),e.qZA(),e.TgZ(21,"mat-form-field",5)(22,"mat-label"),e._uU(23,"Description"),e.qZA(),e._UZ(24,"input",10),e.YNc(25,z,2,1,"mat-error",8),e.qZA(),e.TgZ(26,"mat-form-field",5)(27,"mat-label"),e._uU(28,"Background Color"),e.qZA(),e.TgZ(29,"mat-select",11),e.YNc(30,R,4,4,"mat-option",7),e.qZA(),e.YNc(31,$,2,1,"mat-error",8),e.qZA(),e.TgZ(32,"mat-form-field",5)(33,"mat-label"),e._uU(34,"Coin Value"),e.qZA(),e._UZ(35,"input",12),e.YNc(36,K,3,2,"mat-error",8),e.qZA(),e.TgZ(37,"mat-form-field",5)(38,"mat-label"),e._uU(39,"Sequence"),e.qZA(),e._UZ(40,"input",13),e.qZA(),e.TgZ(41,"mat-form-field",5)(42,"mat-label"),e._uU(43,"Status"),e.qZA(),e.TgZ(44,"mat-select",14)(45,"mat-option",15),e._uU(46,"Active"),e.qZA(),e.TgZ(47,"mat-option",16),e._uU(48,"Inactive"),e.qZA()(),e.YNc(49,X,2,1,"mat-error",8),e.qZA(),e.TgZ(50,"div",5)(51,"mat-label"),e._uU(52,"IsMixed"),e.qZA(),e._UZ(53,"br")(54,"mat-slide-toggle",17),e.qZA()(),e.TgZ(55,"div",18)(56,"button",19),e._uU(57),e.qZA()()()()),2&i&&(e.xp6(3),e.hij("",null!=o.data&&o.data.id?"Update":"Add"," Game Level"),e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(6),e.Q6J("ngForOf",o.gameTypeList),e.xp6(1),e.Q6J("ngIf",o.f.gameTypeId.invalid&&(o.f.gameTypeId.dirty||o.f.gameTypeId.touched||o.showValidation)),e.xp6(5),e.Q6J("ngForOf",null==o.systemConstValues?null:o.systemConstValues.levelTypes),e.xp6(1),e.Q6J("ngIf",o.f.gameLevel.invalid&&(o.f.gameLevel.dirty||o.f.gameLevel.touched||o.showValidation)),e.xp6(5),e.Q6J("ngIf",o.f.description.invalid&&(o.f.description.dirty||o.f.description.touched||o.showValidation)),e.xp6(5),e.Q6J("ngForOf",null==o.systemConstValues?null:o.systemConstValues.colorTypes),e.xp6(1),e.Q6J("ngIf",o.f.bgColor.invalid&&(o.f.bgColor.dirty||o.f.bgColor.touched||o.showValidation)),e.xp6(5),e.Q6J("ngIf",o.f.coinValue.invalid&&(o.f.coinValue.dirty||o.f.coinValue.touched||o.showValidation)),e.xp6(13),e.Q6J("ngIf",o.f.status.invalid&&(o.f.status.dirty||o.f.status.touched||o.showValidation)),e.xp6(8),e.hij("",null!=o.data&&o.data.id?"Update":"Add "," Game Level"))},dependencies:[u.sg,u.O5,A.Hw,g.lW,g.RK,p.ZT,f.KE,f.hX,f.TO,b.Nt,S.gD,G.ey,x.Rr,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u]})}return a})();const ee=["paginator"];function te(a,n){if(1&a&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.gameType)}}function ae(a,n){1&a&&e._UZ(0,"tr",24)}function oe(a,n){1&a&&e._UZ(0,"tr",25)}function ie(a,n){1&a&&(e.TgZ(0,"th",26),e._uU(1,"Game Level"),e.qZA())}function ne(a,n){if(1&a&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",t.gameLevel," ")}}function le(a,n){1&a&&(e.TgZ(0,"th",26),e._uU(1,"Coin Value"),e.qZA())}function re(a,n){if(1&a&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",t.coinValue," ")}}function se(a,n){1&a&&(e.TgZ(0,"th",26),e._uU(1,"Sequence"),e.qZA())}function me(a,n){if(1&a&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",t.sequence," ")}}function de(a,n){1&a&&(e.TgZ(0,"th",26),e._uU(1,"Background Color"),e.qZA())}function ce(a,n){if(1&a&&(e.TgZ(0,"td",27)(1,"div",28),e._UZ(2,"div"),e._uU(3),e.qZA()()),2&a){const t=n.$implicit,i=e.oxw();e.xp6(2),e.Akn("height:20px; width:20px; background-color:"+i.utilService.toColor(t.bgColor)),e.xp6(1),e.hij(" \xa0",t.bgColorKey," ")}}function ue(a,n){1&a&&(e.TgZ(0,"th",26),e._uU(1,"Description"),e.qZA())}function pe(a,n){if(1&a&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",t.description," ")}}function ge(a,n){1&a&&(e.TgZ(0,"th",26),e._uU(1,"Status"),e.qZA())}function fe(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"td",29),e.NdJ("click",function(o){return o.stopPropagation()}),e.TgZ(1,"mat-slide-toggle",30),e.NdJ("change",function(){const s=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.onChangeStatus(s))}),e.qZA()()}if(2&a){const t=n.$implicit;e.xp6(1),e.Q6J("checked","Active"==t.status)}}function ve(a,n){1&a&&e._UZ(0,"th",26)}function he(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"td",27)(1,"button",31),e.NdJ("click",function(){const s=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.addOrEdit(s))}),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()(),e.TgZ(4,"button",31),e.NdJ("click",function(){const s=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.deleteGameLevel(s))}),e.TgZ(5,"mat-icon"),e._uU(6,"delete"),e.qZA()()()}}const _e=[{path:"",component:(()=>{class a{constructor(t,i,o,s,m,v){this.dialog=t,this.gameLevelService=i,this.gameTypeService=o,this.fb=s,this.systemService=m,this.utilService=v,this.displayedColumns=["gameLevel","coinValue","sequence","bgColor","description","status","action"],this.dataSource=new d.by,this.onDestroy=new w.x,this.pagination={pageSizeOptions:[10,25,50,100],pageSize:10,pageIndex:0},this.gameTypeList=[]}ngOnDestroy(){this.onDestroy.next(),this.onDestroy.complete()}ngOnInit(){var t=this;return(0,c.Z)(function*(){t.filterForm=t.fb.group({keyword:new l.NI(null),gameTypeId:new l.NI(null)});let i=yield t.systemService.getSystemConstValues();t.systemConstValues=i,t.filterForm.controls.keyword.valueChanges.pipe((0,U.R)(t.onDestroy),(0,Y.b)(500),(0,J.x)()).subscribe(o=>{t.paginator.pageIndex=0,t.getGameLevelList()}),t.loadData()})()}onGameTypeChanged(){var t=this;return(0,c.Z)(function*(){yield t.getGameLevelList()})()}filterParams(){let t=new N.LE;return t=t.append("skip",this.pagination.pageIndex*this.pagination.pageSize),t=t.append("limit",this.pagination.pageSize),this.filterForm.value.keyword&&(t=t.append("keyword",this.filterForm.value.keyword)),this.filterForm.value.gameTypeId&&(t=t.append("gameTypeId",this.filterForm.value.gameTypeId)),t}loadData(){var t=this;return(0,c.Z)(function*(){try{t.utilService.showLoader();let i=yield t.gameTypeService.getGameTypeDropdownList();t.gameTypeList=i.payload.data,yield t.getGameLevelList(!1)}catch(i){t.utilService.showError(i)}finally{t.utilService.hideLoader()}})()}getGameLevelList(t=!0){var i=this;return(0,c.Z)(function*(){try{t&&i.utilService.showLoader();let o=yield i.gameLevelService.getGameLevelList(i.filterParams());i.buildTableData(o.payload.data),setTimeout(()=>{i.paginator.pageIndex=i.pagination.pageIndex,i.paginator.length=o.payload.totalItems})}catch(o){i.utilService.showError(o)}finally{t&&i.utilService.hideLoader()}})()}buildTableData(t){if(t){let i=t.map(o=>{const s=Object.assign({},o);return s.bgColorKey=this.systemConstValues?.colorTypes.find(m=>m.value==s.bgColor)?.key,s});this.dataSource.data=i}else this.dataSource.data=[]}pageChanged(t){this.pagination.pageSize=t.pageSize,this.pagination.pageIndex=t.pageIndex,this.getGameLevelList()}addOrEdit(t){this.dialog.open(P,{width:"50%",autoFocus:!1,disableClose:!1,data:t}).afterClosed().subscribe(o=>{o&&this.getGameLevelList()})}onChangeStatus(t){var i=this;return(0,c.Z)(function*(){try{i.utilService.showLoader(),t.status="Active"==t.status?"Inactive":"Active";let o=yield i.gameLevelService.updateGameLevel(t);i.utilService.showSuccessSnack(o.message),yield i.getGameLevelList(!1)}catch(o){i.utilService.showError(o)}finally{i.utilService.hideLoader()}})()}deleteGameLevel(t){var i=this;return(0,c.Z)(function*(){if(!0===confirm("Are you sure? Do you want to delete game level?"))try{i.utilService.showLoader();let o=yield i.gameLevelService.deleteGameLevelById(t.id);i.utilService.showSuccessSnack(o.message),yield i.getGameLevelList(!1)}catch(o){i.utilService.showError(o)}finally{i.utilService.hideLoader()}})()}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(p.uw),e.Y36(Z.A),e.Y36(T.u),e.Y36(l.qu),e.Y36(y.o),e.Y36(C.f))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-game-level-list"]],viewQuery:function(i,o){if(1&i&&e.Gf(ee,5,_.NW),2&i){let s;e.iGM(s=e.CRH())&&(o.paginator=s.first)}},decls:39,vars:8,consts:[[1,"heading"],[1,"d-flex"],["mat-button","",3,"click"],[3,"formGroup"],[1,"row"],[1,"col-lg-4"],["formControlName","gameTypeId","placeholder","Select game type",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["mat-table","",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matColumnDef","gameLevel"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","coinValue"],["matColumnDef","sequence"],["matColumnDef","bgColor"],["matColumnDef","description"],["matColumnDef","status"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","action"],["showFirstLastButtons","",1,"mt-3",3,"pageSize","pageIndex","pageSizeOptions","page"],["paginator",""],[3,"value"],["mat-header-row",""],["mat-row",""],["mat-header-cell",""],["mat-cell",""],[2,"display","flex"],["mat-cell","",3,"click"],[3,"checked","change"],["mat-icon-button","",3,"click"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3,"Game Levels"),e.qZA()(),e.TgZ(4,"button",2),e.NdJ("click",function(){return o.addOrEdit(null)}),e.TgZ(5,"mat-icon"),e._uU(6,"add"),e.qZA(),e._uU(7," Add Game Level"),e.qZA()(),e.TgZ(8,"form",3)(9,"div",4)(10,"mat-form-field",5)(11,"mat-select",6),e.NdJ("selectionChange",function(){return o.onGameTypeChanged()}),e.YNc(12,te,2,2,"mat-option",7),e.qZA()()()(),e.TgZ(13,"table",8),e.YNc(14,ae,1,0,"tr",9),e.YNc(15,oe,1,0,"tr",10),e.ynx(16,11),e.YNc(17,ie,2,0,"th",12),e.YNc(18,ne,2,1,"td",13),e.BQk(),e.ynx(19,14),e.YNc(20,le,2,0,"th",12),e.YNc(21,re,2,1,"td",13),e.BQk(),e.ynx(22,15),e.YNc(23,se,2,0,"th",12),e.YNc(24,me,2,1,"td",13),e.BQk(),e.ynx(25,16),e.YNc(26,de,2,0,"th",12),e.YNc(27,ce,4,3,"td",13),e.BQk(),e.ynx(28,17),e.YNc(29,ue,2,0,"th",12),e.YNc(30,pe,2,1,"td",13),e.BQk(),e.ynx(31,18),e.YNc(32,ge,2,0,"th",12),e.YNc(33,fe,2,1,"td",19),e.BQk(),e.ynx(34,20),e.YNc(35,ve,1,0,"th",12),e.YNc(36,he,7,0,"td",13),e.BQk(),e.qZA(),e.TgZ(37,"mat-paginator",21,22),e.NdJ("page",function(m){return o.pageChanged(m)}),e.qZA()),2&i&&(e.xp6(8),e.Q6J("formGroup",o.filterForm),e.xp6(4),e.Q6J("ngForOf",o.gameTypeList),e.xp6(1),e.Q6J("dataSource",o.dataSource),e.xp6(1),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(22),e.Q6J("pageSize",o.pagination.pageSize)("pageIndex",o.pagination.pageIndex)("pageSizeOptions",o.pagination.pageSizeOptions))},dependencies:[u.sg,A.Hw,g.lW,g.RK,_.NW,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,f.KE,S.gD,G.ey,x.Rr,l._Y,l.JJ,l.JL,l.sg,l.u]})}return a})()}];let Le=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.oAB({type:a});static#a=this.\u0275inj=e.cJS({imports:[u.ez,I.q,l.UX,q.Bz.forChild(_e)]})}return a})()}}]);